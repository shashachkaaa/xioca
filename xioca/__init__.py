# üì¶ Xioca UserBot
# üë§ Copyright (C) 2025 shashachkaaa
#
# ‚öñÔ∏è Licensed under GNU AGPL v3.0
# üåê Source: https://github.com/shashachkaaa/xioca
# üìù Docs:   https://www.gnu.org/licenses/agpl-3.0.html

from datetime import datetime

__authors__ = "Sh1tN3t - https://github.com/sh1tn3t https://t.me/sh1tn3t | shashachkaaa - https://github.com/shashachkaa, https://t.me/shashachkaaa"
__license__ = "GNU Affero General Public License v3.0"
__copyright__ = "Copyright (C) 2025 shashachkaaa"

__version__ = "2.7.3"
__start_time__ = datetime.now()
__system_mod__ = ["loader", "help", "tester", "updater", "information", "executor", "settings", "terminal", "info", "botmanager", "eval", "evaluator"]
__get_version_url__ = "https://raw.githubusercontent.com/shashachkaaa/xioca/refs/heads/main/xioca/__init__.py"
__get_commits_url__ = f"https://api.github.com/repos/shashachkaaa/xioca/commits"

__update_desc__ = """ ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚Äã–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤:
–í–Ω–µ–¥—Ä–µ–Ω–∞ —É–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã. –ë–æ–ª—å—à–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—É—Ñ—Ñ–∏–∫—Å—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Ñ—É–Ω–∫—Ü–∏–π.

‚Äã@command(*aliases): –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ª–∏–∞—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, @command("start", "help")).

‚Äã@callback(data): –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è callback-–∫–Ω–æ–ø–æ–∫. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç call.data (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–ª–∏ startswith —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º _).

‚Äã@inline(pattern): –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è inline-–∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É.


‚Äã–°–∏—Å—Ç–µ–º–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (Loops):
–î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª–µ–π.
‚Äã–î–µ–∫–æ—Ä–∞—Ç–æ—Ä @loop(interval=60, autostart=True): –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–µ—Ç–æ–¥—É –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ü–∏–∫–ª–∏—á–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º.
‚Äã–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ú–µ—Ç–æ–¥—ã self.start_loop("name") –∏ self.stop_loop("name") –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ Module.
‚Äã–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫: –ó–∞–¥–∞—á–∏ —Å autostart=True –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è.


‚Äã–•—É–∫ –≤—ã–≥—Ä—É–∑–∫–∏ (on_unload):
–í –∫–ª–∞—Å—Å Module –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ async def on_unload(self).
‚Äã–û–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –º–æ–¥—É–ª—è.
‚Äã–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ë–î, –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á –∏–ª–∏ –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.


‚Äãüõ† –£–ª—É—á—à–µ–Ω–∏—è

‚Äã–ò–Ω—ä–µ–∫—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (Client Injection):
–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç Pyrogram.
‚Äã–î–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ self.client, self.app –∏ self._client.
‚Äã–≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞, –∏–∑–±–∞–≤–ª—è—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∫–ª–∏–µ–Ω—Ç–∞.

‚Äã–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∑–∞–¥–∞—á:
–ü—Ä–∏ –≤—ã–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è (unload_module) —Ç–µ–ø–µ—Ä—å:
‚Äã–í—ã–∑—ã–≤–∞–µ—Ç—Å—è on_unload.
‚Äã–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è (cancel) –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (_tasks), —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ @loop. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏ –æ—à–∏–±–∫–∏ "Task was destroyed but it is pending".

‚Äã–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
–õ–æ–≥–∏–∫–∞ get_command_handlers (–∏ –¥—Ä—É–≥–∏—Ö –≥–µ—Ç—Ç–µ—Ä–æ–≤) –æ–±–Ω–æ–≤–ª–µ–Ω–∞:
‚Äã–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (_custom_commands –∏ —Ç.–¥.).
‚Äã–ï—Å–ª–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –Ω–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –º–µ—Ç–æ–¥—ã –ø–æ —Å—Ç–∞—Ä—ã–º —Å—É—Ñ—Ñ–∏–∫—Å–∞–º (_cmd, _message_handler –∏ —Ç.–¥.).
‚Äã–°—Ç–∞—Ä—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π."""
